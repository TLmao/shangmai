{{ define "main" }}
<div class="section-sm">
    <div class="container">
        <!-- Page Header -->
        <header class="text-center" style="margin-bottom: var(--space-16);">
            <h1
                style="font-size: var(--font-size-4xl); font-weight: var(--font-weight-bold); margin-bottom: var(--space-4);">
                {{ .Title }}
            </h1>
            {{ if .Params.description }}
            <p
                style="font-size: var(--font-size-xl); color: var(--color-text-secondary); max-width: 700px; margin: 0 auto var(--space-6); line-height: var(--line-height-relaxed);">
                {{ .Params.description }}
            </p>
            {{ end }}
        </header>

        <!-- Section Content (tech page content only) -->
        {{ if .Content }}
        <div class="section-content" style="max-width: 1000px; margin: 0 auto;">
            <div
                style="background: white; padding: var(--space-8); border-radius: var(--radius-lg); box-shadow: 0 4px 6px rgba(0,0,0,0.1); line-height: var(--line-height-relaxed);">
                {{ .Content }}
            </div>
        </div>
        {{ end }}

        <!-- No Results Message -->
        <div id="no-results" style="display: none; text-align: center; padding: var(--space-16) 0;">
            <div style="max-width: 400px; margin: 0 auto;">
                <svg width="64" height="64" fill="var(--color-text-muted)" viewBox="0 0 24 24"
                    style="margin-bottom: var(--space-4);">
                    <path
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
                <h3 style="margin-bottom: var(--space-2);">
                    {{ i18n "no_results_found" }}
                </h3>
                <p style="color: var(--color-text-secondary);">
                    {{ i18n "adjust_search_cases" }}
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    // Enhanced Search and Filter Functionality
    document.addEventListener('DOMContentLoaded', function () {
        const searchInput = document.getElementById('search-input');
        const contentGrid = document.getElementById('content-grid');
        const noResults = document.getElementById('no-results');

        if (searchInput && contentGrid) {
            let allItems = Array.from(contentGrid.children);

            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase().trim();
                let visibleCount = 0;

                allItems.forEach(item => {
                    const title = item.getAttribute('data-title') || '';
                    const tags = item.getAttribute('data-tags') || '';
                    const text = item.textContent.toLowerCase();

                    const isVisible = searchTerm === '' ||
                        title.includes(searchTerm) ||
                        tags.includes(searchTerm) ||
                        text.includes(searchTerm);

                    if (isVisible) {
                        item.style.display = 'block';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                // Show/hide no results message
                if (noResults) {
                    noResults.style.display = visibleCount === 0 && searchTerm !== '' ? 'block' : 'none';
                }
            });

            // Clear search with Escape key
            searchInput.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    this.value = '';
                    this.dispatchEvent(new Event('input'));
                    this.blur();
                }
            });
        }
    });
</script>

<style>
    /* Case Card Styles */
    .case-card {
        background: white;
        border-radius: var(--radius-lg);
        padding: var(--space-6);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all var(--transition-normal);
        border: 1px solid var(--color-border);
    }

    .case-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }

    .case-title a:hover {
        color: var(--color-secondary) !important;
    }

    /* Search Input Focus States */
    #search-input:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(11, 95, 255, 0.1);
    }

    /* Animation for cards */
    @keyframes scaleIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .scale-in {
        animation: scaleIn 0.3s ease-out;
    }

    /* Button Styles */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: var(--space-3) var(--space-6);
        border-radius: var(--radius-base);
        font-weight: var(--font-weight-semibold);
        text-decoration: none;
        transition: all var(--transition-fast);
        cursor: pointer;
        border: none;
    }

    .btn-outline {
        background: transparent;
        border: 2px solid var(--color-secondary);
        color: var(--color-secondary);
    }

    .btn-outline:hover {
        background: var(--color-secondary);
        color: white;
    }

    .btn-primary {
        background: var(--color-secondary);
        color: white;
    }

    .btn-primary:hover {
        background: var(--color-primary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .case-grid {
            grid-template-columns: 1fr !important;
            gap: var(--space-6);
        }

        .case-card {
            padding: var(--space-4);
        }

        .case-image-container {
            height: 200px !important;
        }
    }

    /* High Contrast Mode */
    @media (prefers-contrast: high) {
        .case-card {
            border-width: 2px;
        }
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
        .scale-in {
            animation: none;
        }

        .case-card:hover {
            transform: none;
        }

        img {
            transition: none !important;
        }
    }
</style>
{{ end }}